{
    "openapi": "3.0.3",
    "info": {
        "title": "Documentation",
        "version": "1.0"
    },
    "components": {
        "securitySchemes": {
            "api_key": {
                "name": "api_key",
                "type": "apiKey",
                "in": "header"
            }
        }
    },
    "servers": [
        {
        "url": "/"
        }
    ],
    "paths": {
        "/api/v1/auth/login": {
            "post": {
                "tags": ["Авторизация"],
                "summary": "Авторизация для админки",
                "description": "",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "example": {
                                "login": "string",
                                "password": "string"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Успешно",
                        "content": {
                            "application/json": {
                                "example": {
                                    "token": "string",
                                    "id": 0
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/post": {
            "get": {
                "tags": ["Статьи"],
                "summary": "Получить все статьи",
                "description": "Два режима работы: С авторизацией (отключено кэширование), и без авторизации",
                "security": [{ "api_key": [] }],
                "parameters": [
                    { "name": "page", "in": "query", "schema": { "default": 0, "type": "string" } },
                    { "name": "sort[id]", "description": "Доступно: asc/desc. Так-же можно менять поле сортировки sort[slug] как пример", "in": "query", "schema": { "type": "string", "enum": [ "asc", "desc" ]} },
                    { "name": "tag", "in": "query", "description": "Фильтр тэгов, в скобках указывается index из массива тэгов в поиске", "schema": { "type": "array" } },
                    { "name": "title", "in": "query", "description": "Поиск по названию", "schema": { "type": "string" } },
                    { "name": "content", "in": "query", "description": "Поиск по контенту", "schema": { "type": "string" } },
                    { "name": "start_created_at", "in": "query", "description": "Создан от", "schema": { "type": "string" } },
                    { "name": "end_created_at", "in": "query", "description": "Создан до", "schema": { "type": "string" } }
                ],
                "responses": {
                    "200": {
                        "description": "Успешно",
                        "content": {
                            "application/json": {
                                "example": {
                                    "items": [{
                                        "slug": "string",
                                        "title": "string",
                                        "content": "string",
                                        "tags": ["string"],
                                        "created_at": "string",
                                        "updated_at": "string",
                                        "imgsrc": "string",
                                        "delete": 0,
                                        "author": {
                                            "name": "string",
                                            "email": "string"
                                        }
                                    }],
                                    "meta": {
                                        "size": 0,
                                        "perpage": 0,
                                        "page": 0
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": ["Статьи"],
                "summary": "Создать статью",
                "description": "Создаёт статью для сайта. Тело `multipart/form-data`",
                "security": [{ "api_key": [] }],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "title": { "type": "string" },
                                    "content": { "type": "string" },
                                    "tags": { "type": "array", "items": { "type": "string" } },
                                    "photo": { "type": "string", "format": "binary" }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Создано",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Created"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/post/{slug}": {
            "get": {
                "tags": ["Статьи"],
                "summary": "Получить статью",
                "description": "Два режима работы: С авторизацией (больше информации), и без авторизации",
                "parameters": [
                    { "name": "slug", "required": true, "description": "Получить статью по slug-у", "in": "path", "schema": { "type": "string"}}
                ],
                "responses": {
                    "200": {
                        "description": "Один элемент",
                        "content": {
                            "application/json": {
                                "example": {
                                    "slug": "string",
                                    "title": "string",
                                    "content": "string",
                                    "tags": ["string"],
                                    "created_at": "string",
                                    "updated_at": "string",
                                    "imgsrc": "string",
                                    "delete": 0,
                                    "author": {
                                        "name": "string",
                                        "email": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": ["Статьи"],
                "summary": "Обновить статью",
                "description": "Обновить статью на сайте. Тело `multipart/form-data`",
                "security": [{ "api_key": [] }],
                "parameters": [
                    { "name": "slug", "required": true, "description": "Получить статью по slug-у", "in": "path", "schema": { "type": "string" }}
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "title": { "type": "string" },
                                    "content": { "type": "string" },
                                    "tags": { "type": "array", "items": { "type": "string" } },
                                    "photo": { "type": "string", "format": "binary" }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Обновлено",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Updated"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": ["Статьи"],
                "summary": "Архивировать статью",
                "description": "",
                "parameters": [
                    { "name": "slug", "required": true, "in": "path", "schema": { "type": "string" }}
                ],
                "responses": {
                    "202": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Ok, post <slug> delete"
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": ["Статьи"],
                "summary": "Восстановить статью",
                "description": "",
                "parameters": [
                    { "name": "slug", "required": true, "in": "path", "schema": { "type": "string" }}
                ],
                "responses": {
                    "202": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Ok, post <slug> revert"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/price": {
            "get": {
                "tags": [ "Прайслист" ],
                "summary": "Получить Прайслист",
                "description": "Два режима работы: С авторизацией (отключено кэширование), и без авторизации",
                "security": [{ "api_key": [] }],
                "responses": {
                    "200": {
                        "description": "Успешно",
                        "content": {
                            "application/json": {
                                "example": [
                                    {
                                        "discount": 0,
                                        "price": 0,
                                        "tags": [
                                            "string"
                                        ],
                                        "comment": "string",
                                        "final_price": 0
                                    }
                                ]
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [ "Прайслист" ],
                "summary": "Создать Прайс",
                "security": [{ "api_key": [] }],
                "requestBody": {
                    "content": {
                        "application/api": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "price": { "type": "number" },
                                    "tags": { "type": "array", "items": { "type": "string" } },
                                    "discount": { "type": "number" },
                                    "comment": { "type": "string" }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Создано",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Created"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/price/{id}": {
            "post": {
                "tags": [ "Прайслист" ],
                "summary": "Обновить Прайс",
                "security": [{ "api_key": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "description": "", "schema": { "type": "number" }, "required": true }
                ],
                "requestBody": {
                    "content": {
                        "application/api": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "price": { "type": "number" },
                                    "tags": { "type": "array", "items": { "type": "string" } },
                                    "discount": { "type": "number" },
                                    "comment": { "type": "string" }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Обновить",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Updated"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [ "Прайслист" ],
                "summary": "Архивировать Прайс",
                "security": [{ "api_key": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "description": "", "schema": { "type": "number" }, "required": true }
                ],
                "responses": {
                    "202": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Ok, price $id delete"
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [ "Прайслист" ],
                "summary": "Восстановить Прайс",
                "security": [{ "api_key": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "description": "", "schema": { "type": "number" }, "required": true }
                ],
                "responses": {
                    "202": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "example": {
                                    "message": "Ok, price $id revert"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}